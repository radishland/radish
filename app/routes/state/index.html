<head>
  <title>State</title>
</head>

<handle-state id="component">
  <p>
    {count}
    <input
      type="checkbox"
      attr:checked
      prop:checked
      prop:disabled="checked"
    >
  </p>
  <p>
    <button on:click="increment">increment</button>
  </p>
  <p>
    <input
      type="text"
      on:input
      attr:value="input_value"
      prop:value="input_value"
    />
    {input_value}
  </p>
  <p>
    <span textContent="interval" use:hookInterval></span>
  </p>
</handle-state>
<button id="rm">remove component</button>
<button id="add">add component</button>

<p>TODO: path binding for accessing state</p>

<script>
  rm.addEventListener("click", () => {
    if (component.isConnected) {
      component.remove();
    }
  });

  add.addEventListener("click", () => {
    const parent = document.createElement("handle-state");

    const span = document.createElement("span");
    span.setAttribute("text", "count");

    const button = document.createElement("button");
    button.setAttribute("on:click", "increment");
    button.textContent = "click";

    parent.appendChild(span);
    parent.appendChild(button);
    document.body.appendChild(parent);
  });
</script>
